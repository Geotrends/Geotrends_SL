<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Perfiles Semilla - An치lisis</title>
    <link rel="stylesheet" href="/css/ranchera/demografia.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>


    <!-- SCATTER INICIAL -->
    <section class="grafico-scatter-demografia">
      <h2>Distribuci칩n general de perfiles</h2>
      <p>
        Esta secci칩n resume la distribuci칩n de todos los perfiles analizados antes de aplicar segmentaciones autom치ticas.
      </p>

          <!-- controles-superiores section removed -->
    <button id="btnDescargarPDF" class="btn-principal" disabled>游늯 Descargar informe PDF</button>
      <!-- Aqu칤 podr칤a ir el scatter inicial si existe, pero seg칰n el c칩digo, el scatter se muestra tras segmentar -->
      <!-- Se deja la secci칩n para mantener la estructura solicitada -->
    </section>

    <!-- SEGMENTACI칍N -->
    <section class="grafico-segmentacion">
      <h2>Distribuci칩n por segmento de audiencia</h2>
      <p>
        Clasificaci칩n autom치tica de perfiles basada en reglas tem치ticas definidas. El gr치fico resultante muestra la relaci칩n entre seguidores, seguidos y publicaciones de cada perfil seg칰n su segmento.
      </p>
      <div id="editorReglasSegmentacion"></div>
      <button id="botonSegmentarAudiencia" class="btn-verde">
        Segmentar audiencia
      </button>
      <div
        id="grafico-scatter-demografia"
        style="height: 500px; margin-bottom: 2rem"
      ></div>
    </section>

    <!-- GRAFICOS COMPARATIVOS: barras de categor칤as y de sentimiento -->
    <section class="graficos-comparativos grafico-segmentacion">
      <h2>Distribuci칩n de sentimientos</h2>
      <div class="contenedor-graficos-amplio">
        <div class="fila-graficos-doble">
          <div class="bloque-grafico">
            <p>
              Cantidad de perfiles agrupados seg칰n la categor칤a tem치tica detectada durante la segmentaci칩n.
            </p>
            <div
              id="grafico-cantidad-por-categoria"
              class="grafico-barra-horizontal"
            ></div>
          </div>
          <div class="bloque-grafico">
            <p>
              An치lisis de sentimientos detectados en perfiles segmentados, agrupados por categor칤a tem치tica.
            </p>
            <div
              id="grafico-sentimiento-por-categoria"
              class="grafico-barra-horizontal"
            ></div>
          </div>
        </div>
      </div>
    </section>

    <!-- NUBES DE PALABRAS POR SEGMENTO -->
    <section class="nube-palabras-por-segmento">
      <h2>Nubes de palabras por sentimiento</h2>
      <p>
        Palabras m치s representativas extra칤das de biograf칤as de usuarios, diferenciadas por sentimiento y categor칤a. Cada nube representa t칠rminos frecuentes que caracterizan la identidad de los perfiles.
      </p>

      <div class="controles-nube-palabras">
        <label for="selectorCategoriaSegmentada">Filtrar por categor칤a:</label>
        <select id="selectorCategoriaSegmentada"></select>
      </div>

      <div class="sliders-sentimiento">
        <div class="control-slider">
          <label for="sliderSegmentoPositivo"
            >Frecuencia m칤nima (Positivo):
            <span id="valorSegmentoPositivo">1</span></label
          >
          <input
            type="range"
            id="sliderSegmentoPositivo"
            min="1"
            max="10"
            value="1"
          />
          <button
            onclick="descargarWordCloud('contenedorWordCloudSegmentoPositivo')"
          >
            Descargar PNG
          </button>
        </div>
        <div class="control-slider">
          <label for="sliderSegmentoNeutro"
            >Frecuencia m칤nima (Neutro):
            <span id="valorSegmentoNeutro">1</span></label
          >
          <input
            type="range"
            id="sliderSegmentoNeutro"
            min="1"
            max="10"
            value="1"
          />
          <button
            onclick="descargarWordCloud('contenedorWordCloudSegmentoNeutro')"
          >
            Descargar PNG
          </button>
        </div>
        <div class="control-slider">
          <label for="sliderSegmentoNegativo"
            >Frecuencia m칤nima (Negativo):
            <span id="valorSegmentoNegativo">1</span></label
          >
          <input
            type="range"
            id="sliderSegmentoNegativo"
            min="1"
            max="10"
            value="1"
          />
          <button
            onclick="descargarWordCloud('contenedorWordCloudSegmentoNegativo')"
          >
            Descargar PNG
          </button>
        </div>
      </div>

      <div class="contenedor-nubes">
        <div
          id="contenedorWordCloudSegmentoPositivo"
          class="grafico-nube"
        ></div>
        <div id="contenedorWordCloudSegmentoNeutro" class="grafico-nube"></div>
        {{#if nubePalabrasSegmentoNegativo}}
          <div
            id="contenedorWordCloudSegmentoNegativo"
            class="grafico-nube"
          >
            <img src="data:image/png;base64,{{nubePalabrasSegmentoNegativo}}" alt="Nube de palabras negativo" style="width:100%; max-height:400px;" />
          </div>
        {{/if}}
      </div>
      <div class="grafico-emojis-nube">
        <h3>Emojis m치s utilizados por categor칤a</h3>
        <p class="grafico-descripcion">
          Visualizaci칩n de los emojis m치s utilizados por los usuarios, agrupados por categor칤a tem치tica. Refleja expresiones emocionales comunes dentro de cada grupo.
        </p>
        <div id="grafico-emojis-por-categoria" class="grafico-barra-horizontal" style="height: 400px;"></div>
      </div>
    </section>

    <!-- RED DE USUARIOS -->
    <section class="red-usuarios">
      <div class="contenedor-graficos-comparativos">
        <div class="cabecera-seccion">
          <h2>Red de usuarios segmentados</h2>
          <p>
            Visualizaci칩n de perfiles conectados seg칰n categor칤a y sentimiento
            detectado.
          </p>
        </div>
        {{#if redUsuarios}}
          <div id="contenedorRedSegmentacion" class="grafico-red">
            <img src="data:image/png;base64,{{redUsuarios}}" alt="Red de perfiles" style="width:100%; max-height:400px;" />
          </div>
        {{/if}}
      </div>
    </section>

    <!-- TOP PERFILES POR SEGMENTO -->
    <section id="topPerfilesPorSegmento" class="top-perfiles">
      <h2>Top 5 Perfiles por Categor칤a</h2>
      <p>
        Este bloque muestra los cinco perfiles m치s relevantes de cada categor칤a, ordenados seg칰n distintos criterios como seguidores, densidad de emojis o sentimiento positivo.
      </p>
    </section>

    <style></style>

    <script src="/js/ranchera/demografia.js"></script>
    <script src="/js/ranchera/informeDemografia.js"></script>